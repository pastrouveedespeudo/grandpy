{% extends 'core/default.html'%}


  {%block body%}

  
    <style type="text/css">

        .div{
            position:relative;
            left:275px;
            style="width:600px;
            height:300px;
            border:2px solid #999999;
            text-align:center;
        }

        form{
            text-align:center;
        }
       
        p{
            text-align:center;
        }

        #blockinput{
            text-align:center;
        }

        .classRecupInfo{
            text-align:center;
            font-style:italic;
        }


        .div{
            margin-top:-200px;
            text-align:center;
            border:2px solid black;
            width: 580px;
            height: 300px;
            background-color:green;
            overflow:scroll;
        }


        #map{
        
            height:200px;
            width:20%;
            margin-left:900px;
            top:0px;
            position: fixed
        }



        #image1{
            margin-top:auto;
            margin-left:910px;
        }

        .formPseudo{
            margin-top:-200;
            margin-right:910px;
        }
     
    </style>

    
      <form class="formPseudo">

          <input type="text" class="classRecupPseudo" id="idRecupPseudo" size="30" 
              placeholder="Salut rentre ton pseudo"/><br>


          <input type="submit" class="classButtonPseudo" id="idButtonPseudo" value="Enter"/>


      </form>
      
  
      <div id="image1"><img src="static/images/tourne/five.jpg"/></div>   
      
      <div id="map"></div>
      
      <div class="div" id="id">
          <div id="monCadre"></div>
      </div>
      


      
      <div id="monCadreAlert"></div>  
    

      <form>

          <input type="text" class="classRecupInfo" id="idRecupInfo" size="100" 
              placeholder="Salut GrandPy ! Est-ce que tu connais l'adresse d'OpenClassrooms ?"/><br>

    
          <input type="submit" class="classButtonInput" id="idButtonInput" value="Enter"/>


      </form>



      <p><img src="/static/images/chat_home.jpg" alt="imagecat" /></p>


 




    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCt2O8fe5cHDLkjjFk4TQ9Os5Y3vFGmqU8&callback=initMap">
    </script>

  <script type = "text/javascript">
  

      $(document).ready(function(){

          $("form").on("submit", function(e){

              $.ajax({
                  data:{
                      data:$("#idRecupInfo").val(),

                  },
                  type:"POST",
                  url:"/data"

              })
              .done(function(data){

                  if (data.error){
                      $("#monCadreAlert").text(data.error).show();
                      $("#monCadre").hide();
                  }
                  else{
                      $("#monCadre").text(data.data).show();
                      $("#monCadreAlert").hide();
                      initMap();
                      
                  }


              });
              message();
              effacer();
              e.preventDefault();
              
          });
      });


      //Here we input pseudo from users
      $(document).ready(function(){

          $("form").on("submit", function(e){

              $.ajax({
                  data:{
                      data:$("#idRecupPseudo").val(),

                  },
                  type:"POST",
                  url:"/login"

              })
              .done(function(data){

                  if (data.error){
                      $("#monCadreAlert").text(data.error).show();
                      $("#monCadre").hide();
                  }
                  else{
                      $("#monCadre").text(data.data).show();
                      $("#monCadreAlert").hide();
                      initMap();
                      
                  }


              });
              message();
              effacer();
              e.preventDefault();
              
          });
      });


      
      function effacer(){
          document.getElementById("idRecupInfo").value = "";
      }

      HISTORIC = []
      function message(){
          var a = document.getElementById("idRecupInfo").value;
          HISTORIC.push(a);
          console.log(HISTORIC);
      }

      
      HISTORIC2 = []
      function catch_monCadre(){
          var a = document.getElementById("monCadre").value;
          HISTORIC.push(a);
          console.log(HISTORIC2);
      }


      function add_database(){

      //ajouter favoris
      }







      function image_tourne(){
          var liste = [
              "one.jpg",
              "two.jpg",
              "three.jpg",
              "for.jpg",
              "five.jpg"
              ];
          
      document.getElementById("image1").innerHTML = `<img src="static/images/tourne/${liste[4]}" />`;
          for(var i = 0; i >= liste.length; i++){
              
              document.getElementById("image1").innerHTML = `<img src="static/images/tourne/${liste[4]}" />`;
          };
      };

      setTimeout(image_tourne(),500);




      function initMap(){
          
          liste = [[],[],[],[],[],[],[],[],
                   [],[],[],[],[],[],[],[],
                   [],[],[],[],[],[],[],[]]
          
          liste2 = []
          
          var c = document.getElementById("monCadre");
          var a = c.innerText || c.textContent;
          var b = a.length;
          console.log(a)
          
          var c = 0;

          for(var i = 0; i<=b;i++){
                    liste[c].push(a[i]);
                    if(a[i] === ","){
                      c++;
                    };
                  };

          for(var i =0;i<=liste.length;i++){
              if(liste[i]!=""){
                  liste2.push(liste[i]);
              }
           };

          a = Number(liste2[liste2.length -3].slice(0,-1).join(''));
          b = Number(liste2[liste2.length -2].slice(0,-1).join(''));

          console.log(a)
          console.log(b)
      

          var options = {
              zoom:13,
              center:{lat:a,lng:b}
          }
          var map = new google.maps.Map(document.getElementById("map"), options);
      } 
       



      function imageTourne(){
          document.getElementById('nom-de-ta-photo').src= "l'url de ta nouvelle image";
      }







          
  </script>
{% endblock body%}



































  
